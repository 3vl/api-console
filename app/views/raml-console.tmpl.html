<article role="api-console">
  <section role="error" ng-if="parseError">
    {{parseError}}
  </section>

  <h1>{{api.title}}</h1>

  <div class='accordion' role="resources">
    <div class='accordion-group' role="resource" ng-repeat="resource in api.resources">
      <div class='accordion-heading accordion-toggle' ng-click='resource.isOpen = !resource.isOpen'>
        <ul role="traits">
          <li role="trait" ng-repeat="trait in resource.traits">{{trait}}</li>
        </ul>
        <h2>
          <span role='segment' ng-repeat='segment in resource.pathSegments'>{{segment}}</span>
        </h2>

        <span role="displayName" ng-show='resource.name'>
          "{{resource.name}}"
          <span ng-show='resource.resourceType'>
            |
          </span>
        </span>
        <span role="resourceType" ng-show='resource.resourceType'>
          Type: <span>{{resource.resourceType}}</span>
        </span>

        <ul role="methods" ng-class="{'hidden': resource.isOpen}">
          <li role="{{method}}" ng-repeat="method in resource.methods">{{method.verb}}</li>
        </ul>
      </div>
      <div class='accordion-body' ng-show='resource.isOpen'>
        <div class='accordion-inner'>
          <div class='accordion' role="methodSummaries">
            <div class='accordion-group' role="methodSummary" ng-repeat="method in resource.methods">
              <div class='accordion-heading accordion-toggle' ng-click='method.isOpen = !method.isOpen'>
                <i ng-class="{'icon-caret-right': !method.isOpen, 'icon-caret-down': method.isOpen}"></i>
                <span role="method">{{method.verb}}</span>
                <span role="path">
                  <span role='segment' ng-repeat='segment in resource.pathSegments'>{{segment}}</span>
                </span>
                <div class="pull-right">
                  <button role="try-it" class="btn">Try It</button>
                  <i class="icon-file-alt documentation"></i>
                </div>
              </div>
              <div class='accordion-body' ng-show='method.isOpen'>
                <div class='accordion-inner'>
                  <section role='documentation'>
                    <p>Description: {{method.description}}</p>

                    <h4 class='selector'>
                      Parameters
                    </h4>
                    <section role='uri-parameters'>
                      <parameter-table heading='URI Parameters' parameters='resource.uriParameters'/>
                      }
                    </section>
                    <section role='query-parameters'>
                      <parameter-table heading='Query Parameters' parameters='method.queryParameters'/>
                    </section>
                  </section>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</article>
