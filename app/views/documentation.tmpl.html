<section role='documentation'>
  <p ng-show="method.description">Description: {{method.description}}</p>

  <tabset>
    <tab role='documentation-parameters' heading="Parameters" disabled="!documentation.hasParameterDocumentation">
      <parameter-table heading='Headers' role='headers' parameters='method.headers'></parameter-table>
      <parameter-table heading='URI Parameters' role='uri-parameters' parameters='resource.uriParameters'></parameter-table>
      <parameter-table heading='Query Parameters' role='query-parameters' parameters='method.queryParameters'></parameter-table>
    </tab>
    <tab role='documentation-requests' heading="Requests" active='documentation.requestsActive' disabled="!documentation.hasRequestDocumentation">
      <div ng-repeat="(mediaType, definition) in method.body track by mediaType">
        <h2>{{mediaType}}</h2>
        <div ng-if="definition.schema">
          <h3>Request Schema</h3>
          <div class="code" code-mirror="definition.schema" mode="{{mediaType}}" visible="methodView.expanded && documentation.requestsActive"></div>
        </div>
        <div ng-if="definition.example">
          <h3>Example Request</h3>
          <div class="code" code-mirror="definition.example" mode="{{mediaType}}" visible="methodView.expanded && documentation.requestsActive"></div>
        </div>
      </div>
    </tab>
    <tab role='documentation-responses' heading="Responses" active='documentation.responsesActive' disabled='!documentation.hasResponseDocumentation'>
      <h2>Responses</h2>
      <div ng-repeat='(responseCode, response) in method.responses'>
        <h3>
          <a href="" ng-click='documentation.toggleExpansion(response)'>
            <i ng-class="{'icon-caret-right': response.collapsed, 'icon-caret-down': !response.collapsed}"></i>
            {{responseCode}}
          </a>
        </h3>
        <section role='response' ng-hide='response.collapsed'>
          <p markdown='response.description'></p>
          <div ng-repeat="(mediaType, definition) in response.body track by mediaType">
            <h2>{{mediaType}}</h2>
            <div ng-if="definition.schema">
              <h3>Response Schema</h3>
              <div class="code" mode='{{mediaType}}' code-mirror="definition.schema" visible="methodView.expanded && documentation.responsesActive"></div>
            </div>
            <div ng-if="definition.example">
              <h3>Example Response</h3>
              <div class="code" mode='{{mediaType}}' code-mirror="definition.example" visible="methodView.expanded && documentation.responsesActive"></div>
            </div>
          </div>
        </section>
      </div>
    </tab>
  </tabset>
</section>
