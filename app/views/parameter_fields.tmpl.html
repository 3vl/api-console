<fieldset>
  <div ng-repeat="(parameterName, parameter) in parameters.plain track by parameterName">
    <div class="parameter-field" ng-repeat="definition in parameter.definitions" ng-show="parameter.isSelected(definition)">
      <div repeatable="definition.repeat" repeatable-model="parameters.values[parameterName]">
        <div class="control-group">
          <label for="{{parameterName}}">
            <span class="required" ng-if="definition.required">*</span>
            {{definition.displayName}}:
          </label>
          <ng-switch on='parameterFields.inputView(definition)'>
            <span ng-switch-when="file">
              <input name="{{parameterName}}" type='file' ng-model='repeatableModel[$index]'/>
            </span>
            <span ng-switch-when="enum">
              <enum options='definition.enum' model='repeatableModel[$index]'>
                <input validated-input name="{{parameterName}}" type='text' ng-model='repeatableModel[$index]' placeholder='{{definition.example}}' ng-trim="false" constraints='definition'/>
              </enum>
           </span>
            <span ng-switch-default>
              <input validated-input name="{{parameterName}}" type='text' ng-model='repeatableModel[$index]' placeholder='{{definition.example}}' ng-trim="false" constraints='definition'/>
            </span>
          </ng-switch>
          <repeatable-remove></repeatable-remove>
          <repeatable-add></repeatable-add>
        </div>
      </div>
    </div>

    <div class="parameter-type" ng-if="parameter.hasMultipleTypes()">
      as
      <select class="form-control" ng-model="parameter.selected" ng-options="definition.type as definition.type for definition in parameter.definitions"></select>
    </div>
  </div>

  <div class="parameter-factory" ng-repeat='(name, _) in parameters.parameterized'>
    <parameterized-parameter parameter-name="name" parameters="parameters"></parameterized-parameter>
  </div>
</fieldset>
